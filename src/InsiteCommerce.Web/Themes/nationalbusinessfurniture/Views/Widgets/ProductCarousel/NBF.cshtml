[% if Model.Drop.DisabledMessage != "" %]
    [[Model.Drop.DisabledMessage]]
[% else %]
<div class="widget-webcrosssells [[Model.CssClass]]" ng-controller="ProductCarouselController as vm"
     product-carousel-type="[[Model.CarouselType]]"
     related-product-type="[[Model.RelatedProductsRelationship]]"
     is-product-detail-page="[[Model.Drop.IsProductDetailPage]]"
     number-of-products-to-display="[[Model.Drop.NumberOfProductsToDisplay]]"
     seed-with-manually-assigned="[[Model.Drop.SeedWithManuallyAssigned]]"
     enable-dynamic-recommendations="[[Model.Drop.EnableDynamicRecommendations]]"
     product-carousel-id="[[Model.Drop.ProductCarouselId]]"
     selected-category-ids="[[Model.Drop.SelectedCategoryIds]]"
     is-catalog-page="[[Model.Drop.IsCatalogPage]]"
     pr-api-key="[% siteMessage 'PowerReviews_ApiKey' '56b8fc6a-79a7-421e-adc5-36cbdaec7daf ' %]"
     pr-merchant-group-id="[% siteMessage 'PowerReviews_MerchantGroupId' '47982' %]"
     pr-merchant-id="[% siteMessage 'PowerReviews_MerchantId' '33771' %]"
     >
    <h3 ng-if="vm.showCarousel()" ng-cloak>[[Model.Title]]</h3>
    <div class="row recently-viewed" role="cross-sells" ng-if="vm.showCarousel()" ng-cloak>
        <div class="medium-12 large-12 columns">
            <div class="carousel-wrapper">
                <div class="cs-carousel flexslider">
                    <ul class="items slides tst_productCarousel[[Model.RelatedProductsRelationship]]_slides">
                        <li id="tst_productCarousel[[Model.RelatedProductsRelationship]]_{{product.id}}" class="medium-3 large-3 columns isc-productContainer tst_productCarousel[[Model.RelatedProductsRelationship]]_productContainer" ng-repeat="product in vm.products track by $id(product)">
                            <div class="item-block__product four-col__item">
                                <div class="favorite-btn" ng-if="vm.isAuthenticatedAndNotGuest">
                                    <a id="tst_productDetail_addToWishList" ng-class="{'in-favorites': product.properties['isFavorite'] == 'true' } "
                                       ng-click="vm.toggleFavorite(product)" role="button"
                                       class="btn secondary btn-add-to-list" href="javascript:;"></a>
                                </div>
                                <div class="favorite-btn" ng-if="vm.isAuthenticatedAndNotGuest">
                                    <a id="tst_productDetail_addToWishList" ng-class="{'in-favorites': product.properties['isFavorite'] == 'true' } "
                                       ng-click="vm.toggleFavorite(product)" role="button"
                                       class="btn secondary btn-add-to-list" href="javascript:;"></a>
                                </div>
                                <a href="{{product.productDetailUrl}}">
                                    <div class="item-block__product__img-wrap">
                                        <img class="item-block__product__img" ng-src="https://s7d9.scene7.com/is/image/NationalBusinessFurniture/{{product.smallImagePath ? product.smallImagePath : product.mediumImagePath}}?hei=200&id=5-zsy2&fmt=jpg&fit=constrain,1&wid=344&hei=344" alt="{{product.altText}}" increment-images-loaded />
                                    </div>
                                    <div class="item-block__product__details">
                                        <div class="item-block__product__swatch">
                                            <ul>
                                                <li ng-repeat="swatchImg in vm.getTop6Swatches(product.properties['swatches'])">
                                                    <div class="item-block__product__swatch__img-wrap">
                                                        <img class="item-block__product__swatch" ng-src="https://s7d9.scene7.com/is/image/NationalBusinessFurniture/{{swatchImg}}?hei=200&id=5-zsy2&fmt=jpg&fit=constrain,1&wid=344&hei=344" />
                                                    </div>
                                                </li>
                                                <li class="right" ng-if="vm.getSwatchesCount(product.properties['swatches']) > 6"><u>More</u></li>
                                            </ul>
                                        </div>
                                        <div class="item-block__product__desc">
                                            {{product.shortDescription}}
                                        </div>
                                        <div class="item-block__product__price-wrap">
                                            <div class="item-block__product__price">
                                                <isc-product-price product="product"></isc-product-price>
                                                <isc-product-price-saving product="product"></isc-product-price-saving>
                                            </div>
                                            <div ng-if="vm.isAttributeValue(product, 'GSA', 'Yes');" class="item-block__product__flag gsa">
                                                GSA
                                            </div>
                                        </div>
                                        <div class="item-block__product__col-2 clearfix">
                                            <div class="col-1">
                                                <div id="pr-{{product.productCode}}" class="item-block__product__stars">
                                                </div>
                                            </div>
                                            <div class="col-2">
                                                <div class="item-block__product__ships-today" ng-if="vm.isAttributeValue(product, 'Ships Today', 'Yes');"><span class="ico-Truck"></span> Ships Today!</div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="flex-control-wrap">
                    <a href="#" class="rp-wrap carousel-control-nav carousel-control-prev flex-prev"><span></span></a>
                    <div class="rp-wrap custom-controls-container">

                    </div>
                    <a href="#" class="rp-wrap carousel-control-nav carousel-control-next flex-next"><span></span></a>
                </div>
            </div>
        </div>
    </div>
</div>

[% endif %]