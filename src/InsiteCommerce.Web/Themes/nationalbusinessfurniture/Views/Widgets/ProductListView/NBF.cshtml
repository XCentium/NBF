<div>
    <isc-spinner name="productlist" show="false" id="tst_productList_spinner"></isc-spinner>
    <div class="row product-list category-list"
         ng-class="{
             'vm-list': vm.isCategoryPage() || vm.view == 'list' || vm.view == 'List' || vm.view == undefined,
             'vm-grid': !vm.isCategoryPage() && vm.view == 'grid',
             'vm-table': !vm.isCategoryPage() && vm.view == 'table'
         }"
         ng-controller="ProductListController as vm" ng-show="vm.ready" ng-cloak>

        <div class="large-12 columns">
            <div>
                <div ng-if="vm.isCategoryPage() && !vm.filteredResults" class="category-list">
                    <isc-catalog-breadcrumb breadcrumbs="vm.breadCrumbs"></isc-catalog-breadcrumb>
                </div>
            </div>
            <div ng-if="vm.category != null" class="pl4-cm">
                <div class="row">
                    <div class="medium-12 large-12 columns widget-1column no-margin [[Model.CssClass]]" ng-if="vm.category.largeImagePath">
                        <div class="banner banner--homepage">
                            <div class="banner__bg--homepage homepage__banner-bg" style="background-image: url('{{vm.category.largeImagePath}}');'"></div>
                            <div class="banner__content banner__content--bottomleft  banner__content--default">
                                <h1>{{vm.category.shortDescription}}</h1>
                                <p ng-bind-html="vm.category.htmlContent|trusted"></p>
                            </div>
                        </div>
                    </div>
                    <div ng-if="!vm.category.largeImagePath" class="small-12 medium-10 push-1 columns widget-1column no-margin">
                        <h1>{{vm.category.shortDescription}}</h1>
                        <p ng-bind-html="vm.category.htmlContent|trusted"></p>
                    </div>
                </div>
            </div>
            <div class="cat-list row" ng-if="vm.isCategoryPage() && !vm.filteredResults">
                <div class="medium-12 large-12 columns widget-1column narrow-container category-list">
                    <div class="row">
                        <div class="medium-12 large-12 columns widget-1column">
                            <ul class="category-list__wrap  row" data-equalizer>
                                <li class="large-3 medium-4 small-12 column category-list__item" ng-repeat="subCategory in vm.category.subCategories" data-equalizer-watch>
                                    <a ng-href="{{subCategory.path}}">
                                        <div class="category-list__img-wrap">
                                            <img class="category-list__img" ng-src="{{subCategory.smallImagePath}}" alt="{{subCategory.imageAltText}}" />
                                        </div>
                                        <div class="category-list__title">
                                            <h2>{{subCategory.shortDescription}}</h2>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-if="!vm.isCategoryPage() || vm.filteredResults" class="content-wrapper">
                <div class="row">
                    <div class="medium-12 large-12 columns widget-1column narrow-container">
                        <div class="row">
                            <isc-category-left-nav ng-if="vm.ready" ready="vm.ready" products="vm.products" attribute-value-ids="vm.attributeValueIds" filter-category="vm.filterCategory"
                                                   price-filter-minimums="vm.priceFilterMinimums" bread-crumbs="vm.breadCrumbs"
                                                   search-within-terms="vm.searchWithinTerms" category="vm.category">
                            </isc-category-left-nav>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="medium-12 large-12 columns widget-1column narrow-container">
                        <div class="row">
                            <div id="tst_productList_container" class="right small-12 columns" ng-class="{ 'large-12': !vm.noResults || vm.searchWithinTerms.length > 0}">
                                <h3 class="results-count" ng-class="{ messaging: vm.noResults && vm.searchWithinTerms.length }">
                                    <span ng-if="vm.query && !(vm.searchCategory || vm.filterCategory.categoryId)" class="search-lbl">
                                        {{ vm.noResults ? "[% translate 'No results found for' %]" : "[% translate 'results for' %]" }} <strong>{{vm.query}}</strong>
                                    </span>
                                    <span ng-if="vm.query && (vm.searchCategory || vm.filterCategory.categoryId)" class="search-lbl">
                                        {{ vm.noResults ? "[% translate 'No results found for' %]" : "[% translate 'results for' %]" }} <strong>{{vm.query}}</strong> [% translate 'in_category' %] {{vm.searchCategory.shortDescription || vm.filterCategory.shortDescription}}
                                    </span>
                                </h3>
                                <div class="search-didyoumean" ng-if="vm.products.didYouMeanSuggestions.length >= 1">
                                    [% translate 'Did you mean ' %] <a ng-click="vm.goToSearchCriteria(vm.products.didYouMeanSuggestions[0].suggestion)" ng-bind="vm.products.didYouMeanSuggestions[0].suggestion"></a>
                                </div>
                                <div class="search-autocorrect-original" ng-if="vm.autoCorrectedQuery">
                                    [% translate 'Search instead for' %] <a ng-click="vm.goToSearchCriteria(vm.originalQuery, false)">{{vm.originalQuery}}</a>
                                </div>
                                <div ng-show="vm.products.products.length > 0">
                                    <isc-pager id="tst_productList_topPager" pagination="vm.products.pagination" storage-key="vm.paginationStorageKey" update-data="vm.updateProductData()" select-view="vm.selectView(viewName)" custom-context="vm.customPagerContext" page-changed="vm.pagerPageChanged()"></isc-pager>
                                    <ul class="item-list cart-items" id="tst_productList_nonTable">
                                        <li ng-repeat="product in vm.products.products" id="tst_productList_{{product.id}}" class="row item-block checkout-item isc-productContainer {{product.isSponsored ? 'sponsored' : ''}}" data-product="{{product.id}}">
                                            <div class="sponsored-container" ng-if="product.isSponsored">
                                                <span class="sponsored-label">Sponsored</span>
                                            </div>
                                            <div class="item-thumb">
                                                <a ng-href="{{product.productDetailUrl}}">
                                                    <img ng-src="https://s7d9.scene7.com/is/image/NationalBusinessFurniture/{{product.mediumImagePath}}?hei=250&id=Iu1rN2&fmt=jpg&fit=constrain,1&wid=250&hei=250" alt="{{product.altText}}" increment-images-loaded />
                                                </a>
                                                <!--
                                                <div ng-if="vm.settings.enableProductComparisons" class="product-compare-add">
                                                    <a href="javascript:void(0);" data-id="{{product.id}}" class="compare-link" ng-class="{ 'compare-active': product.isBeingCompared }" ng-click="vm.compareProduct(product);">[% translate 'Compare' %]</a>
                                                </div>
                                                -->
                                                <div class="favorite-btn" ng-if="vm.isAuthenticated">
                                                    <a id="tst_productDetail_addToWishList" ng-class="{'in-favorites': product.properties['isFavorite'] == 'true' } "
                                                       ng-click="vm.toggleFavorite(product)" role="button"
                                                       class="btn secondary btn-add-to-list" href="javascript:;"></a>
                                                </div>
                                            </div>
                                            <div class="item-details">
                                                <div class="item-inf-wrapper">
                                                    <div class="item-description">
                                                        <div class="item-name item-name-list">
                                                            <a id="tst_productList_{{product.id}}_descriptionLink" ng-href="{{product.productDetailUrl}}">{{product.shortDescription}}</a>
                                                        </div>
                                                        <div class="item-block__product__swatch">
                                                            <ul>
                                                                <li ng-repeat="swatchImg in vm.getTop3Swatches(product.properties['swatches'])">
                                                                    <div class="item-block__product__swatch__img-wrap">
                                                                        <img class="item-block__product__swatch" ng-src="https://s7d9.scene7.com/is/image/NationalBusinessFurniture/{{swatchImg}}?hei=200&id=5-zsy2&fmt=jpg&fit=constrain,1&wid=344&hei=344" />
                                                                    </div>
                                                                </li>
                                                                <li class="item-block__product__more-link"><u>More</u></li>
                                                            </ul>
                                                        </div>
                                                        <div class="item-name item-name-grid">
                                                            <a id="tst_productList_{{product.id}}_descriptionLink" ng-href="{{product.productDetailUrl}}">{{product.shortDescription}}</a>
                                                        </div>
                                                        <div class="item-num">
                                                            <span ng-if="product.manufacturerItem" class="item-num-mfg">[% translate 'MFG #' %]: {{product.manufacturerItem}}</span>
                                                            <span ng-if="product.customerName" class="item-num-my">[% translate 'My Part #' %]: {{product.customerName}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="item-block__product__price-wrap">
                                                        <div class="item-block__product__price">
                                                            <isc-product-price product="product" ng-cloak></isc-product-price>
                                                            <isc-product-price-saving product="product" display-savings-percent="false" ng-cloak></isc-product-price-saving>
                                                        </div>
                                                        <div ng-if="vm.isAttributeValue(product, 'GSA', 'Yes');" class="item-block__product__flag gsa">
                                                            GSA
                                                        </div>
                                                    </div>
                                                    <div class="item-block__product__col-2 clearfix">
                                                        <div class="col-1">
                                                            <div class="item-block__product__stars"><div class="rating"></div>Stars Here!</div>
                                                        </div>
                                                        <div class="col-2">
                                                            <div class="item-block__product__ships-today" ng-if="vm.isAttributeValue(product, 'Ships Today', 'Yes');"><span class="ico-Truck"></span> Ships Today!</div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="vm.view == 'list' && (product.specifications | filter: { name: 'Features' }).length > 0">
                                                        Features:
                                                        <div ng-repeat="specification in product.specifications | filter: { name: 'Features' } | orderBy: 'sortOrder'" ng-bind-html="specification.htmlContent|trusted"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="display: none;">
                                                <nbf-sorted-attribute-value-list ng-if="product.attributeTypes.length > 0" attribute-types="product.attributeTypes" maximum-number="3" class="attribute-list"></nbf-sorted-attribute-value-list>
                                            </div>
                                            <div class="item-price" ng-if="!vm.failedToGetRealTimePrices" style="display: none;">
                                                <div class="actions-block">
                                                    <div ng-if="product.canAddToCart" class="product-list-actions">
                                                        <div class="add-to-cart-block">
                                                            <div ng-if="product.canEnterQuantity" class="item-qty">
                                                                <input type="text" name="qty" ng-model="product.qtyOrdered" class="qty numerictextbox" />
                                                            </div>
                                                            <table ng-show="!vm.isSearch" id="tst_productList_table" class="info-tbl tv-table container">
                                                                <thead>
                                                                    <tr>
                                                                        <th data-class="tv-description" class="tv-description">[% translate 'Description' %]</th>
                                                                        <th ng-repeat="section in vm.visibleTableColumns(null)" class="tv-attr{{$index+1}}" data-id="{{section.attributeTypeId}}" data-class="tv-attr{{$index+1}}">{{section.nameDisplay}}</th>
                                                                        <th data-class="tv-availability" class="tv-availability" ng-if="vm.settings.showInventoryAvailability">[% translate 'Availability' %]</th>
                                                                        <th data-class="tv-price" class="tv-price">[% translate 'Price' %]</th>
                                                                        <th data-class="tv-um" class="tv-um">[% translate 'U/M' %]</th>
                                                                        <th data-class="tv-action" class="tv-action" data-toggle="true"></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="product in vm.products.products" id="tst_productList_{{product.id}}" class="isc-productContainer-tv" data-product="{{product.id}}">
                                                                        <td>
                                                                            <div class="item-thumb">
                                                                                <a ng-href="{{product.productDetailUrl}}">
                                                                                    <img ng-src="https://s7d9.scene7.com/is/image/NationalBusinessFurniture/{{product.mediumImagePath}}?hei=250&id=Iu1rN2&fmt=jpg&fit=constrain,1&wid=250&hei=250" alt="{{product.altText}}" />
                                                                                </a>
                                                                            </div>
                                                                            <div class="item-description">
                                                                                <div class="item-name">
                                                                                    <a ng-href="{{product.productDetailUrl}}">{{product.shortDescription}}</a>
                                                                                </div>
                                                                                <div class="item-num">
                                                                                    <span class="item-num-sku">{{product.erpNumber}}</span>
                                                                                    <span ng-if="product.manufacturerItem" class="item-num-mfg">[% translate 'MFG #' %]: {{product.manufacturerItem}}</span>
                                                                                    <span ng-if="product.customerName" class="item-num-my">[% translate 'My Part #' %]: {{product.customerName}}</span>
                                                                                </div>
                                                                                <div ng-if="vm.settings.enableProductComparisons" class="product-compare-add">
                                                                                    <a href="javascript:;" data-id="{{product.id}}" class="compare-link" ng-class="{ 'compare-active': product.isBeingCompared }" ng-click="vm.compareProduct(product);">[% translate 'Compare' %]</a>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td class="attribute-column" ng-repeat="section in vm.visibleTableColumns(null)">
                                                                            {{vm.attributeValueForSection(section, product)}}
                                                                        </td>
                                                                        <td class="attribute-column" ng-if="vm.settings.showInventoryAvailability">
                                                                            <isc-availability-message availability="product.availability" failed-to-get-real-time-inventory="vm.failedToGetRealTimeInventory"></isc-availability-message>
                                                                        </td>
                                                                        <td class="price-column">
                                                                            <isc-product-price product="product" id-key="_tv"></isc-product-price>
                                                                            <isc-quantity-break-pricing ng-show="product.canShowPrice && !product.quoteRequired"
                                                                                                        product-id="product.id + '_tv'" break-prices="product.pricing.unitRegularBreakPrices">
                                                                            </isc-quantity-break-pricing>
                                                                        </td>
                                                                        <td>
                                                                            <span class="um displayUnitOfMeasure isc-uomDisplay">{{product.unitOfMeasureDescription || product.unitOfMeasureDisplay}}</span>
                                                                        </td>
                                                                        <td ng-class="{ noToggle: !product.canAddToCart }" class="tv-last-column">
                                                                            <div ng-if="product.canAddToCart" class="actions-block">
                                                                                <div class="product-info">
                                                                                    <div class="um-pack">
                                                                                        <div class="um">
                                                                                            <label ng-if="vm.settings.alternateUnitsOfMeasure && product.productUnitOfMeasures.length > 1">[% translate 'U/M' %]:</label>
                                                                                            <isc-unit-of-measure-select-list product="product" alternate-units-of-measure="{{vm.settings.alternateUnitsOfMeasure}}" change-unit-of-measure="vm.changeUnitOfMeasure(product)" display-pack="true"></isc-unit-of-measure-select-list>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="add-to-cart-block">
                                                                                    <div ng-if="product.canEnterQuantity" class="item-qty">
                                                                                        <input type="text" name="qty" ng-model="product.qtyOrdered" class="qty numerictextbox" />
                                                                                    </div>
                                                                                    <div class="action" ng-if="product.canAddToCart">
                                                                                        <button ng-show="(vm.product.availability.messageType != 2 || vm.product.canBackOrder) && product.canAddToCart" id="tst_productList_{{product.id}}_addToCart" ng-click="vm.addToCart(product)" href="javascript:void(0);" class="btn-add-cart btn primary" ng-disabled="!product.qtyOrdered || product.qtyOrdered == 0 || vm.addingToCart">[% translate 'Add To Cart' %]</button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <isc-pager bottom="true" pagination="vm.products.pagination" storage-key="vm.paginationStorageKey" update-data="vm.updateProductData()" custom-context="vm.customPagerContext"></isc-pager>
                                                        </div>
                                                    </div>
                                                    <div class="item-price" ng-if="vm.failedToGetRealTimePrices">
                                                        <div>[% siteMessage 'RealTimePricing_PriceLoadFailed' %]</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>

                                    <table ng-show="!vm.isSearch" id="tst_productList_table" class="info-tbl tv-table container">
                                        <thead>
                                            <tr>
                                                <th data-class="tv-description" class="tv-description">[% translate 'Description' %]</th>
                                                <th ng-repeat="section in vm.visibleTableColumns(null)" class="tv-attr{{$index+1}}" data-id="{{section.attributeTypeId}}" data-class="tv-attr{{$index+1}}">{{section.nameDisplay}}</th>
                                                <th data-class="tv-availability" class="tv-availability" ng-if="vm.settings.showInventoryAvailability">[% translate 'Availability' %]</th>
                                                <th data-class="tv-price" class="tv-price">[% translate 'Price' %]</th>
                                                <th data-class="tv-um" class="tv-um">[% translate 'U/M' %]</th>
                                                <th data-class="tv-action" class="tv-action" data-toggle="true"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="product in vm.products.products" id="tst_productList_{{product.id}}" class="isc-productContainer-tv" data-product="{{product.id}}">
                                                <td>
                                                    <div class="item-thumb">
                                                        <a ng-href="{{product.productDetailUrl}}">
                                                            <img ng-src="https://s7d9.scene7.com/is/image/NationalBusinessFurniture/{{product.mediumImagePath}}?hei=250&id=Iu1rN2&fmt=jpg&fit=constrain,1&wid=250&hei=250" alt="{{product.altText}}" />
                                                        </a>
                                                    </div>
                                                    <div class="item-description">
                                                        <div class="item-name">
                                                            <a ng-href="{{product.productDetailUrl}}">{{product.shortDescription}}</a>
                                                        </div>
                                                        <div class="item-num">
                                                            <span class="item-num-sku">{{product.erpNumber}}</span>
                                                            <span ng-if="product.manufacturerItem" class="item-num-mfg">[% translate 'MFG #' %]: {{product.manufacturerItem}}</span>
                                                            <span ng-if="product.customerName" class="item-num-my">[% translate 'My Part #' %]: {{product.customerName}}</span>
                                                        </div>
                                                        <div ng-if="vm.settings.enableProductComparisons" class="product-compare-add">
                                                            <a href="javascript:;" data-id="{{product.id}}" class="compare-link" ng-class="{ 'compare-active': product.isBeingCompared }" ng-click="vm.compareProduct(product);">[% translate 'Compare' %]</a>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="attribute-column" ng-repeat="section in vm.visibleTableColumns(null)">
                                                    {{vm.attributeValueForSection(section, product)}}
                                                </td>
                                                <td class="attribute-column" ng-if="vm.settings.showInventoryAvailability">
                                                    <isc-availability-message availability="product.availability" failed-to-get-real-time-inventory="vm.failedToGetRealTimeInventory"></isc-availability-message>
                                                </td>
                                                <td class="price-column">
                                                    <isc-product-price product="product" id-key="_tv"></isc-product-price>
                                                    <isc-quantity-break-pricing ng-show="product.canShowPrice && !product.quoteRequired"
                                                                                product-id="product.id + '_tv'" break-prices="product.pricing.unitRegularBreakPrices">
                                                    </isc-quantity-break-pricing>
                                                </td>
                                                <td>
                                                    <span class="um displayUnitOfMeasure isc-uomDisplay">{{product.unitOfMeasureDescription || product.unitOfMeasureDisplay}}</span>
                                                </td>
                                                <td ng-class="{ noToggle: !product.canAddToCart }" class="tv-last-column">
                                                    <div ng-if="product.canAddToCart" class="actions-block">
                                                        <div class="product-info">
                                                            <div class="um-pack">
                                                                <div class="um">
                                                                    <label ng-if="vm.settings.alternateUnitsOfMeasure && product.productUnitOfMeasures.length > 1">[% translate 'U/M' %]:</label>
                                                                    <isc-unit-of-measure-select-list product="product" alternate-units-of-measure="{{vm.settings.alternateUnitsOfMeasure}}" change-unit-of-measure="vm.changeUnitOfMeasure(product)" display-pack="true"></isc-unit-of-measure-select-list>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="add-to-cart-block">
                                                            <div ng-if="product.canEnterQuantity" class="item-qty">
                                                                <input type="text" name="qty" ng-model="product.qtyOrdered" class="qty numerictextbox" />
                                                            </div>
                                                            <div class="action" ng-if="product.canAddToCart">
                                                                <button ng-show="(vm.product.availability.messageType != 2 || vm.product.canBackOrder) && product.canAddToCart" id="tst_productList_{{product.id}}_addToCart" ng-click="vm.addToCart(product)" href="javascript:void(0);" class="btn-add-cart btn primary" ng-disabled="!product.qtyOrdered || product.qtyOrdered == 0 || vm.addingToCart">[% translate 'Add To Cart' %]</button>
                                                            </div>
                                                        </div>
                                                        <a id="tst_productList_{{product.id}}_addToWishList" ng-show="product.canAddToWishlist" ng-click="vm.openWishListPopup(product)" role="button" class="btn secondary btn-add-list" href="javascript:void(0);">[% translate 'Add to List' %]</a>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <isc-pager bottom="true" pagination="vm.products.pagination" storage-key="vm.paginationStorageKey" update-data="vm.updateProductData()" custom-context="vm.customPagerContext"></isc-pager>
                                </div>

                                <div id="tst_productList_nothingFound" class="clr lfl w100" ng-if="vm.products.products && !(vm.products.products.length > 0)">
                                    <div ng-if="vm.isSearch">
                                        <div>
                                            [[ Model.NoSearchResultsFound ]]
                                        </div>
                                    </div>
                                    <div ng-if="!vm.isSearch">
                                        <div>
                                            [[ Model.NoProductsFound ]]
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" ng-if="vm.isCategoryPage() && !vm.filteredResults && vm.category.properties['extraContent']" ng-cloak>
                <div class="small-12 medium-8 push-2 column">
                    <hr />
                    <h2>{{vm.category.shortDescription}}</h2>
                    <div ng-bind-html="vm.category.properties['extraContent']"></div>
                    <hr />
                </div>
            </div>
        </div>
    </div>

    <div id="AddToCompareExceedsSixProducts" class="product-list reveal-modal medium" data-reveal data-reveal-init>
        <div class="modal-wrap compare-wrap">
            <strong>[% siteMessage 'ProductionCompare_MaximumItemsReached' %]</strong>
            <p>[% siteMessage 'ProductionCompare_MaximumItemsReachedSubText' %]</p>
            <div class="compare-buttons">
                <a href="[% urlForPage 'ProductComparisonPage' %]"><button id="productListViewExceedSixProductsCompareButton" class="btn primary btn-compare">[% translate 'Compare' %]</button></a>
            </div>
            <a class="close-reveal-modal">&#215;</a>
        </div>
    </div>

    <isc-popup-template container-id="popup-columns-limit" title="[% translate 'Warning' %]" ng-cloak>
        [% translate 'You cannot select more than 3 attributes.' %]
    </isc-popup-template>
</div>

<isc-product-comparison-hopper></isc-product-comparison-hopper>

<script type="text/ng-template" id="productList_productComparisonHopper">
    <div class="compare-hopper" ng-show="vm.canShowCompareHopper()">
        <div class="compare-container">
            <div class="compare-item" ng-repeat="product in vm.productsToCompare">
                <a href="javascript:void(0);" class="compare-remove" ng-click="vm.clickRemove(product)">[% translate 'Remove' %]</a><img ng-src="https://s7d9.scene7.com/is/image/NationalBusinessFurniture/{{product.smallImagePath}}?hei=250&id=Iu1rN2&fmt=jpg&fit=constrain,1&wid=100&hei=100" alt="product.altText" />
                <div class="item-name">
                    <a data-id="product.id" href="javascript:void(0);">{{product.shortDescription}}</a>
                </div>
            </div>
        </div>
        <div class="compare-tray">({{vm.productsToCompare.length}}) {{vm.productsToCompare.length > 1 ? 'Items' : 'Item'}}</div>
        <div class="compare-buttons">
            <a href="[% urlForPage 'ProductComparisonPage' %]"><button id="tst_productList_compare" class="btn primary btn-compare" ng-click="vm.storeReturnUrl()">[% translate 'Compare' %]</button></a>
            <a href="javascript:void(0);"><button id="tst_productList_clear" class="btn tertiary btn-clear" ng-click="vm.removeAllProductsToCompare()">[% translate 'Clear All' %]</button></a>
        </div>
    </div>
</script>

<script type="text/ng-template" id="productList_categoryLeftNav">

    [% capture filterStatusControls %]
    <div class="n-filtered" ng-if="vm.filterCategory.categoryId || vm.attributeValues.length > 0 || vm.priceFilters.length > 0 || vm.searchWithinTerms.length > 0">
        <ul>
            <li>
                <a id="tst_productList_categoryLeftNav_appliedCategory_{{vm.filterCategory.categoryId}}" href="javascript:;" ng-if="vm.filterCategory.categoryId" ng-click="vm.toggleCategoryId(vm.filterCategory.categoryId) ">
                    <em>[% translate 'Category' %]:</em> <span>{{vm.filterCategory.shortDescription}}</span>
                </a>
            </li>
            <li ng-repeat="attributeValue in vm.attributeValues">
                <a href="javascript:;" ng-click="vm.toggleFilter(attributeValue.attributeValueId)">
                    <em>{{attributeValue.sectionNameDisplay}}:</em> <span>{{attributeValue.valueDisplay}}</span>
                </a>
            </li>
            <li ng-repeat="priceFacet in vm.priceFilters">
                <a href="javascript:;" ng-click="vm.togglePriceFilter(priceFacet.minimumPrice.toString())">
                    <em>[% translate 'Price' %]: {{vm.priceRangeDisplay(priceFacet)}}</em>
                </a>
            </li>
            <li ng-repeat="term in vm.searchWithinTerms">
                <a href="javascript:;" ng-click="vm.clearSearchWithinItem($index)">
                    <em>[% translate 'Search' %]: {{term}}</em>
                </a>
            </li>
        </ul>
        <div class="clear-all"><a id="tst_productList_categoryLeftNav_clearFilters" href="#" ng-click="vm.clearFilters() ">[% translate 'Clear All' %]</a></div>
    </div>
    [% endcapture %]

    <div class="large-12 column" id="tst_productList_left_nav">
        <div class="ln2-wrap">
            <div ng-if="category" class="nav-head">
                <h2>{{vm.category.shortDescription}}</h2>
                <ul>
                    <li ng-repeat="breadcrumb in vm.leftNavBreadCrumbs()"><a ng-href="{{breadcrumb.path}}">{{breadcrumb.text}}</a></li>
                </ul>
            </div>
            <div class="f-cat" role="mobile-filters">
                <section class="accordion">
                    <div>
                        <input type="checkbox" id="accord-10000" class="accord-check" checked />
                        <label id="tst_productList_tableView_filterButton" for="accord-10000" class="accord-head  mobile-title">[% translate 'Filters' %]</label>
                        <article class="accord-content">

                            <div class="n-filter row">
                                <div class="filter-label">
                                    <span class="filter-title">[% translate 'Filter By' %]:</span>
                                </div>

                                [[filterStatusControls]]
                                <div class="large-12 column filter-middle product-list-filters">
                                    <div class="f-search-within" style="display:none;">
                                        <div class="search-within-search clearfix">
                                            <label ng-if="!vm.category">[% translate 'Search Within Results' %]</label>
                                            <label ng-if="vm.category">[% translate 'Search Within Category' %]</label>

                                            <div class="search-container">
                                                <div class="search-input">
                                                    <input id="searchWithin" type="text" placeholder="[% translate 'Enter keywords' %]" ng-model="vm.searchWithinInput" isc-enter="vm.searchWithinEntered()" />
                                                </div>
                                                <div class="search-button">
                                                    <button class="btn primary fastClick" ng-click="vm.searchWithinEntered()">Go</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="f-cat" ng-if="vm.products.categoryFacets.length > 0">
                                        <section class="accordion">
                                            <div>
                                                <input type="checkbox" id="accord-1" class="accord-check" />
                                                <label for="accord-1" class="accord-head">[% translate 'Categories' %]</label>
                                                <article class="accord-content">
                                                    <div class="f-wrap">
                                                        <ul>
                                                            <li class="view-all"><a href="javascript:;"><span>View All</span></a></li>
                                                            <li id="tst_productList_categoryLeftNav_categoryFacet_{{categoryFacet.categoryId}}" ng-repeat="categoryFacet in vm.products.categoryFacets | orderBy : 'shortDescription'"
                                                                ng-class="{'f-selected' : categoryFacet.selected}"
                                                                ng-click="vm.toggleCategory(categoryFacet)">
                                                                <a href="javascript:;">
                                                                    <span class="f-name">{{categoryFacet.shortDescription}}</span>
                                                                    <span class="f-count">({{categoryFacet.count}})</span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </article>
                                            </div>
                                        </section>
                                    </div>

                                    <div class="f-cat" ng-if="vm.products.priceRange.priceFacets.length > 0">
                                        <section class="accordion">
                                            <div>
                                                <input type="checkbox" id="accord-2" class="accord-check" />
                                                <label for="accord-2" class="accord-head">[% translate 'Price' %]</label>
                                                <article class="accord-content">
                                                    <div class="f-wrap">
                                                        <ul>
                                                            <li class="view-all"><a href="javascript:;"><span>View All</span></a></li>
                                                            <li id="tst_productList_priceFacet_{{priceFacet.minimumPrice.toString()}}"
                                                                ng-repeat="priceFacet in vm.products.priceRange.priceFacets | orderBy : 'minimumPrice'"
                                                                ng-class="{'f-selected' : vm.isPriceFacetSelected(priceFacet)}"
                                                                ng-click="vm.togglePriceFilter(priceFacet.minimumPrice.toString())">
                                                                <a href="javascript:;">
                                                                    <span class="f-name tst_productList_priceFacet_{{$index}}">{{vm.priceRangeDisplay(priceFacet)}}</span> <span ng-attr-id="{{'leftNavCategoryPriceFacetCount_' + $index}}" class="f-count tst_productList_priceFacetCount_{{$index}}">({{priceFacet.count}})</span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </article>
                                            </div>
                                        </section>
                                    </div>

                                    <div ng-repeat="section in vm.products.attributeTypeFacets | orderBy : ['sort','nameDisplay']" class="f-cat" ng-if="vm.products.attributeTypeFacets.length > 0">
                                        <section class="accordion">
                                            <div>
                                                <input type="checkbox" id="accord-{{$index + 3}}" class="accord-check" />
                                                <label for="accord-{{$index + 3}}" class="accord-head">{{section.nameDisplay}}</label>
                                                <article class="accord-content">
                                                    <div class="f-wrap">
                                                        <ul>
                                                            <li class="view-all"><a href="javascript:;"><span>View All</span></a></li>
                                                            <li id="tst_productList_categoryLeftNav_attributeValueFacet_{{attributeValue.attributeValueId}}"
                                                                ng-repeat="attributeValue in section.attributeValueFacets | orderBy : ['sortOrder','valueDisplay']"
                                                                ng-class="{'f-selected' : vm.isAttributeValueFacetSelected(attributeValue)}"
                                                                ng-click="vm.toggleFilter(attributeValue.attributeValueId)">
                                                                <a href="javascript:;">
                                                                    <span class="f-name">{{attributeValue.valueDisplay}}</span>
                                                                    <span class="f-count">({{attributeValue.count}})</span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </article>
                                            </div>
                                        </section>
                                    </div>

                                    <!-- hidden div to force load of checked image -->
                                    <div class="f-cat" style="display:none;">
                                        <ul class="accordion">
                                            <li class="current active">
                                                <ul> <li class="f-selected"></li></ul>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="filter-select-wrap product-list-filters">
                                    <div>
                                        <section class="accordion">
                                            <div>
                                                <input type="checkbox" id="accord-11" class="accord-check">
                                                <label for="accord-11" class="accord-head">Edit Filters</label>
                                                <article class="accord-content">
                                                    <div class="f-wrap">
                                                        <ul>
                                                            <li id="tst_productList_categoryLeftNav_attributeValueFacet_b8318efc-87fd-e711-a98c-a3e0f1200094">
                                                                <a href="javascript:;">
                                                                    <span class="f-name">Colors</span>
                                                                </a>
                                                            </li><!-- end ngRepeat: attributeValue in section.attributeValueFacets | orderBy : ['sortOrder','valueDisplay'] -->
                                                            <li id="tst_productList_categoryLeftNav_attributeValueFacet_bc318efc-87fd-e711-a98c-a3e0f1200094">
                                                                <a href="javascript:;">
                                                                    <span class="f-name">Matrials</span>
                                                                </a>
                                                            </li><!-- end ngRepeat: attributeValue in section.attributeValueFacets | orderBy : ['sortOrder','valueDisplay'] -->
                                                            <li id="tst_productList_categoryLeftNav_attributeValueFacet_bd318efc-87fd-e711-a98c-a3e0f1200094">
                                                                <a href="javascript:;">
                                                                    <span class="f-name">Rooms</span>
                                                                </a>
                                                            </li><!-- end ngRepeat: attributeValue in section.attributeValueFacets | orderBy : ['sortOrder','valueDisplay'] -->
                                                        </ul>
                                                    </div>
                                                </article>
                                            </div>
                                        </section>
                                    </div>
                                </div>
                            </div>
                        </article>
                    </div>
                </section>
            </div>

            <!-- narrow version filters -->
            <div class="f-cat" role="mobile-filters" style="display:none;">
                <section class="accordion">
                    <div>
                        <input type="checkbox" id="accord-10000" class="accord-check" checked="checked" />
                        <label id="tst_productList_tableView_filterButton" for="accord-10000" class="accord-head mobile-title">[% translate 'Filters' %]</label>
                        <article class="accord-content">
                            <form>
                                <div class="row">
                                    [[filterStatusControls]]
                                </div>
                                <div class="row">
                                    <div class="filter-option-container">
                                        <div class="search-within-search">
                                            <label ng-if="!vm.category">[% translate 'Search Within Results' %]</label>
                                            <label ng-if="vm.category">[% translate 'Search Within Category' %]</label>

                                            <div class="search-container">
                                                <div class="search-input">
                                                    <input id="searchWithin" type="text" placeholder="[% translate 'Enter keywords' %]" ng-model="vm.searchWithinInput" isc-enter="vm.searchWithinEntered()" />
                                                </div>
                                                <div class="search-button">
                                                    <button class="btn primary fastClick" ng-click="vm.searchWithinEntered()">Go</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="vm.products.categoryFacets.length > 0" class="filter-option-container">
                                        <select data-mini="true"
                                                ng-model="filterCategoryId"
                                                ng-change="vm.toggleCategoryId(filterCategoryId)">
                                            <option value="">[% translate 'Category' %]</option>
                                            <option ng-repeat="categoryFacet in vm.products.categoryFacets | orderBy : 'shortDescription'"
                                                    ng-selected="categoryFacet.selected"
                                                    value="{{categoryFacet.categoryId}}">
                                                {{categoryFacet.shortDescription}} ({{categoryFacet.count}})
                                            </option>
                                        </select>
                                    </div>

                                    <div ng-if="vm.products.priceRange.priceFacets.length > 0" class="filter-option-container">
                                        <select data-mini="true" ng-model="priceFacetMinimum" ng-change="vm.togglePriceFilter(priceFacetMinimum)" name="tst_productList_priceFacet_select">
                                            <option value="">[% translate 'Price' %]</option>
                                            <option ng-repeat="priceFacet in vm.products.priceRange.priceFacets | orderBy : 'minimumPrice'"
                                                    ng-selected="priceFacet.selected"
                                                    value="{{priceFacet.minimumPrice}}">
                                                {{vm.priceRangeDisplay(priceFacet)}} ({{priceFacet.count}})
                                            </option>
                                        </select>
                                    </div>

                                    <div ng-repeat="section in vm.products.attributeTypeFacets | orderBy : ['sort','nameDisplay']" class="filter-option-container">
                                        <select data-mini="true" ng-model="section.attributeValueId" ng-change="vm.toggleFilter(section.attributeValueId || section.attributeTypeId)">
                                            <option value="">{{section.nameDisplay}}</option>
                                            <option ng-repeat="attributeValue in section.attributeValueFacets | orderBy : ['sortOrder','valueDisplay']"
                                                    ng-selected="attributeValue.selected"
                                                    value="{{attributeValue.attributeValueId}}">
                                                {{attributeValue.valueDisplay}} ({{attributeValue.count}})
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </form>
                        </article>
                    </div>
                </section>
            </div>
        </div>
    </div>
</script>